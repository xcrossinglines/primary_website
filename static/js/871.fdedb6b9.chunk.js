"use strict";(self.webpackChunkxcrossinglines=self.webpackChunkxcrossinglines||[]).push([[871],{3871:(e,t,s)=>{s.r(t),s.d(t,{default:()=>_});var r=s(2791),n=s(7689),a=s(1087),c=s(7022),o=s(2144),d=s(6144),i=s(3360),l=s(2797),x=s(8808),m=s(5794),u=s(9625),h=s(9554),j=s(2879),p=s(5977),f=s(4674),b=s(184);function g(e){let{job:t}=e;const[s,a]=new r.useState(m.tx.none),[c,g]=new r.useState(""),[v,y]=new r.useState(""),[N,w]=r.useState(!1),_=(0,n.s0)(),Z=(e,t,s)=>{a((t=>e)),g((e=>t)),y((e=>s));const r=e===m.tx.loading;w((e=>r))},C=e=>{let{job:t}=e;return(0,b.jsx)("div",{className:"px-3",children:(0,b.jsxs)("table",{className:"table table-".concat(k(t)," table-striped table-bordered"),children:[(0,b.jsx)("thead",{children:(0,b.jsx)("tr",{children:(0,b.jsx)("th",{scope:"col",children:"Routes"})})}),(0,b.jsx)("tbody",{children:t.routes.map(((e,t)=>(0,b.jsx)("tr",{children:(0,b.jsx)("td",{children:(0,b.jsxs)("div",{className:"d-flex flex-column",children:[(0,b.jsxs)("span",{className:"form-text fw-bold",children:[t+1," - ",m.tP[e.description]]}),(0,b.jsx)("span",{children:e.route_name})]})})})))})]})})},k=e=>e.job_completed?"secondary":e.job_canceled?"danger":"success";return console.log(t),(0,b.jsxs)(o.Z,{id:"Invoice-".concat(t.id),className:"dropdown__shadow card__section mb-3 border-0 rounded-0",children:[(0,b.jsx)(o.Z.Header,{className:"fw-bold border-0 rounded-0 bg-".concat(k(t)," text-white"),children:(0,b.jsxs)("div",{className:"d-flex flex-row justify-content-between align-items-center",children:[(0,b.jsxs)("span",{style:{fontWeight:900},children:["INVOICE ",t.id]}),(0,b.jsx)("span",{className:"text-white fw-bold",children:(e=>e.job_completed?"COMPLETED":e.job_canceled?"CANCELLED":"ACTIVE")(t)})]})}),(0,b.jsxs)(o.Z.Body,{className:"pb-0 px-0 pt-0",children:[(0,l.w)(s,c,v),(0,b.jsx)("div",{className:"px-3 mt-3",children:(0,b.jsxs)("table",{className:"table table-".concat(k(t)," table-striped table-bordered"),children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{scope:"col",children:"Description"}),(0,b.jsx)("th",{scope:"col",children:"Qty"})]})}),(0,b.jsxs)("tbody",{children:[(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{children:"Job date"}),(0,b.jsx)("td",{children:"".concat(f.Ib.format(new Date("".concat(t.job_date))))})]}),(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{children:"Date time"}),(0,b.jsx)("td",{children:"".concat(f.Lm.format(new Date("".concat(t.job_date," ").concat(t.job_time))))})]}),(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{children:"Vehicle size"}),(0,b.jsx)("td",{children:"".concat(t.vehicle_size," ton")})]}),(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{children:"Payment option"}),(0,b.jsx)("td",{children:"".concat(t.payment_option)})]}),(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{children:"Helpers"}),(0,b.jsx)("td",{children:"".concat(t.helpers)})]}),(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{children:"Floors"}),(0,b.jsx)("td",{children:"".concat(t.floors)})]}),(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{children:"Distance"}),(0,b.jsx)("td",{children:"".concat(t.distance," km")})]}),(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{children:"Driver note"}),(0,b.jsx)("td",{children:"".concat(t.driver_note)})]})]})]})}),(0,b.jsx)(C,{job:t}),(0,b.jsx)("div",{className:"mt-2",children:(0,b.jsx)(x.U,{job:t})})]}),(0,b.jsx)(o.Z.Footer,{className:"pb-3 px-0 mx-3 border-0 bg-transparent d-flex flex-row justify-content-end align-items-center",children:(0,b.jsxs)(d.Z,{children:[(0,b.jsx)(i.Z,{disabled:t.job_canceled||N||t.job_completed,variant:"outline-primary",className:"rounded-0 border-0 fw-bold",onClick:()=>{let e=window.document.createElement("a");e.href="/jobs/job/".concat(t.id,"/update"),e.target="_blank",e.rel="noreferrer",e.click()},children:"Update"}),(0,b.jsx)(i.Z,{variant:"outline-danger",disabled:t.job_canceled||N||t.job_completed,className:"border-0 rounded-0 fw-bold",onClick:async()=>{const e=document.getElementById("JOBS_TITLE"),s=document.getElementById("Invoice-".concat(t.id));window.scrollTo(0,s.offsetTop-e.offsetTop),await(0,p.r)((async()=>await(async()=>{const[e,s]=(0,u.f)();if(e){Z(m.tx.loading,"Cancelling Job...","");const e="jobs/api/job/update/".concat(t.id,"/");return void await h.Z.patch(e,{job_canceled:!0}).then((async e=>{if(200===e.status){const e="Success",t="Job cancelled";Z(m.tx.success,e,t),await(0,p.r)((()=>window.location.href=m.dX.jobs),2e3)}})).catch((e=>{(0,j.X)(e,Z)}))}Z(m.tx.info,"Dear valued customer. ","To cancel a job you must be signed in. we'll navigate you to the sign-in page."),await(0,p.r)((()=>_(m.dX.signin)),6e3)})()))},children:"Cancel"})]})})]})}var v=s(6122),y=s(3978),N=s(9775),w=s(5594);function _(){const[e,t]=r.useState(m.tx.none),[s,o]=r.useState(""),[d,i]=r.useState(""),[x,f]=r.useState([]),[_,Z]=r.useState(!1),C=(0,n.s0)(),k=(e,s,r)=>{t((t=>e)),o((e=>s)),i((e=>r))},P=r.useCallback((async()=>{const[e,t]=(0,u.f)();if(e)return Z((e=>!1)),k(m.tx.loading,"Fetching Jobs ...",""),void await h.Z.get("jobs/api/get/").then((e=>{Z((e=>!0)),f((t=>[...e.data.results])),k(m.tx.none,"","")})).catch((e=>{Z((e=>!1)),(0,j.X)(e,k)}));k(m.tx.info,"Dear valued customer. ","To view this section you must be signed in. we'll navigate you to the sign-in page."),await(0,p.r)((()=>C(m.dX.signin)),6e3)}),[]);return r.useEffect((()=>{P()}),[P]),r.useEffect((()=>{window.scrollTo(0,0)}),[]),(0,b.jsx)(y.E.section,{variants:N.v,animate:"visible",initial:"hidden",exit:"exit",transition:{duration:w.V$,delay:w.p},children:(0,b.jsxs)(c.Z,{className:"px-3 d-flex flex-column justify-content-center align-items-center px-0",children:[(0,b.jsxs)("div",{className:"card__section pt-3",children:[(0,b.jsx)("div",{id:"JOBS_TITLE",className:"h3 p-0 m-0 mb-4 text-center",style:{fontWeight:"900"},children:"Jobs"}),(0,l.w)(e,s,d)]}),(e=>{if(e)return x.length<=0?(0,b.jsxs)("div",{className:"p-1",children:[(0,b.jsx)("span",{className:"fw-bold",children:"Make your first Job. "}),(0,b.jsx)(a.rU,{className:"sign__in__links",to:m.dX.create_job,children:"Create Job."})]}):x.map(((e,t)=>(0,b.jsx)(g,{job:e},t)))})(_),(0,b.jsx)(v.P,{height:"".concat(window.innerHeight/2,"px")})]})})}},8808:(e,t,s)=>{s.d(t,{U:()=>l});s(2791);var r=s(9813),n=s(2144),a=s(8396),c=s(9126),o=s(5794),d=s(6612),i=s(184);function l(e){let{job:t,padding:s="p-3"}=e;const l=Intl.NumberFormat("en-ZA",{style:"currency",currency:"zar",minimumSignificantDigits:1}),x=e=>(0,i.jsx)(r.Z,{id:"popover-basic",className:"rounded-0 border-secondary",arrowProps:{style:{backgroundColor:"red"}},children:(0,i.jsx)(r.Z.Body,{className:"text-secondary fw-bold rounded-0",children:e})});return(0,i.jsx)(n.Z,{className:"dropdown__shadow rounded-0 border-0",children:(0,i.jsx)(n.Z.Body,{className:"".concat(s),children:(0,i.jsxs)("table",{className:"table table-bordered table-striped table-dark m-0",children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{scope:"col",children:"Description"}),(0,i.jsx)("th",{scope:"col",children:"Price(ZAR)"})]})}),(0,i.jsxs)("tbody",{children:[(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsxs)("div",{className:"d-flex flex-row",children:[(0,i.jsx)("span",{children:"Base fee"}),(0,i.jsx)(d.w,{className:"px-1",children:(0,i.jsx)(a.Z,{trigger:"click",placement:"top",rootClose:!0,overlay:x("".concat(o.rF)),children:(0,i.jsx)("div",{children:(0,i.jsx)(c.Hfo,{role:"button",className:"text-primary"})})})})]})}),(0,i.jsx)("td",{children:"".concat(l.format(t.base_fee))})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsxs)("div",{className:"d-flex flex-row",children:[(0,i.jsx)("span",{children:"Off peak"}),(0,i.jsx)(d.w,{className:"px-1",children:(0,i.jsx)(a.Z,{trigger:"click",placement:"top",rootClose:!0,overlay:x("".concat(o.Pm)),children:(0,i.jsx)("div",{children:(0,i.jsx)(c.Hfo,{role:"button",className:"text-primary"})})})})]})}),(0,i.jsx)("td",{className:"text-danger fw-bolder",children:"".concat(t.mid_discount>0?"-":""," ").concat(l.format(t.mid_discount))})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsxs)("div",{className:"d-flex flex-row",children:[(0,i.jsx)("span",{children:"Return customer"}),(0,i.jsx)(d.w,{className:"px-1",children:(0,i.jsx)(a.Z,{trigger:"click",placement:"top",rootClose:!0,overlay:x("".concat(o.te)),children:(0,i.jsx)("div",{children:(0,i.jsx)(c.Hfo,{role:"button",className:"text-primary"})})})})]})}),(0,i.jsx)("td",{className:"text-danger fw-bolder",children:"".concat(t.return_customer_discount>0?"-":""," ").concat(l.format(t.return_customer_discount))})]}),t.give_extra_discount?(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsxs)("div",{className:"d-flex flex-row",children:[(0,i.jsx)("span",{children:"Extra discount"}),(0,i.jsx)(d.w,{className:"px-1",children:(0,i.jsx)(a.Z,{trigger:"click",placement:"top",rootClose:!0,overlay:x("".concat(o.j_)),children:(0,i.jsx)("div",{children:(0,i.jsx)(c.Hfo,{role:"button",className:"text-primary"})})})})]})}),(0,i.jsx)("td",{className:"text-danger",children:"".concat(t.give_extra_discount?"-":""," ").concat(l.format(t.extra_discount))})]}):null,t.set_price_adjustment?(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsxs)("div",{className:"d-flex flex-column",children:[(0,i.jsxs)("div",{className:"d-flex flex-row",children:[(0,i.jsx)("span",{children:"Price adjustment"}),(0,i.jsx)(d.w,{className:"px-1",children:(0,i.jsx)(a.Z,{trigger:"click",placement:"top",rootClose:!0,overlay:x("".concat(o.fk)),children:(0,i.jsx)("div",{children:(0,i.jsx)(c.Hfo,{role:"button",className:"text-primary"})})})})]}),(0,i.jsxs)("span",{className:"text-muted form-text fw-bold border border-2 px-1 bg-light",children:["Price adjustment justification:"," ",(0,i.jsx)("span",{className:"text-dark",children:t.price_adjustment_justification})]})]})}),(0,i.jsx)("td",{children:"".concat(l.format(t.price_adjustment))})]}):null]}),(0,i.jsx)("tfoot",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsxs)("div",{className:"d-flex flex-row",children:[(0,i.jsx)("span",{style:{fontWeight:"900"},children:"Amount due"}),(0,i.jsx)(d.w,{className:"px-1",children:(0,i.jsx)(a.Z,{trigger:"click",placement:"top",rootClose:!0,overlay:x("".concat(o.Iu)),children:(0,i.jsx)("div",{children:(0,i.jsx)(c.Hfo,{role:"button",className:"text-primary"})})})})]})}),(0,i.jsx)("td",{children:(0,i.jsx)("span",{style:{fontWeight:"900",fontSize:"".concat(1.25,"rem")},children:l.format(t.amount_due).replace("ZA","")})})]})})]})})})}},2879:(e,t,s)=>{s.d(t,{X:()=>a});const r={100:"Continue",101:"Switching protocols",102:"Processing",103:"Early hints",200:"Ok",201:"Created",202:"Accepted",203:"Non authoritative information",204:"No content",205:"Reset content",206:"Partial content",207:"Multi status",208:"Already reported",226:"Im used",300:"Multiple choices",301:"Moved permanently",302:"Found",303:"See other",304:"Not modified",305:"Use proxy",306:"Reserved",307:"Temporary redirect",308:"Permanent redirect",400:"Bad request",401:"Unauthorized",402:"Payment required",403:"Forbidden",404:"Not found",405:"Method_not_allowed",406:"Not acceptable",407:"Proxy authentication required",408:"Request timeout",409:"Conflict",410:"Gone",411:"Length required",412:"Precondition failed",413:"Request entity too large",414:"Request uri too long",415:"Unsupported media type",416:"Requested range not satisfiable",417:"Expectation failed",418:"Im a teapot",421:"Misdirected_request",422:"Unprocessable entity",423:"Locked",424:"Failed dependency",425:"Too early",426:"Upgrade required",428:"Precondition required",429:"Too many requests",431:"Request header fields too large",451:"Unavailable for legal reasons"};var n=s(5794);function a(e,t){if(e.response){let s;const a=e.response.status;if(a>=500)return s="Internal server error. Contact admin",void t(n.tx.error,"Oops!",s);e.response.data.detail?(s="".concat(r[a],", ").concat(e.response.data.detail),t(n.tx.error,"Oops!",s)):e.response.data.msg?(s="".concat(r[a],", ").concat(e.response.data.msg),t(n.tx.error,"Oops!",s)):e.response.data.email?(s="".concat(r[a],", ").concat(e.response.data.email),t(n.tx.error,"Oops!",s)):(s="".concat(r[a]),t(n.tx.error,"Oops!",s))}else e.request?t(n.tx.error,"Oops!",e.request):t(n.tx.error,"Oops!",e.message)}},4674:(e,t,s)=>{s.d(t,{Ib:()=>r,Lm:()=>n});const r=Intl.DateTimeFormat("en-ZA",{weekdays:"long",year:"numeric",month:"long",day:"numeric"}),n=Intl.DateTimeFormat("en-Za",{hour:"numeric",minute:"numeric",timeZone:"Africa/Harare",timeZoneName:"short"});Intl.NumberFormat("en-ZA",{style:"currency",currency:"zar",minimumSignificantDigits:1})},5341:(e,t,s)=>{s.d(t,{FT:()=>c,ZP:()=>d});var r=s(2791),n=s(184);const a=["as","disabled"];function c(e){let{tagName:t,disabled:s,href:r,target:n,rel:a,role:c,onClick:o,tabIndex:d=0,type:i}=e;t||(t=null!=r||null!=n||null!=a?"a":"button");const l={tagName:t};if("button"===t)return[{type:i||"button",disabled:s},l];const x=e=>{(s||"a"===t&&function(e){return!e||"#"===e.trim()}(r))&&e.preventDefault(),s?e.stopPropagation():null==o||o(e)};return"a"===t&&(r||(r="#"),s&&(r=void 0)),[{role:null!=c?c:"button",disabled:void 0,tabIndex:s?void 0:d,href:r,target:"a"===t?n:void 0,"aria-disabled":s||void 0,rel:"a"===t?a:void 0,onClick:x,onKeyDown:e=>{" "===e.key&&(e.preventDefault(),x(e))}},l]}const o=r.forwardRef(((e,t)=>{let{as:s,disabled:r}=e,o=function(e,t){if(null==e)return{};var s,r,n={},a=Object.keys(e);for(r=0;r<a.length;r++)s=a[r],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,a);const[d,{tagName:i}]=c(Object.assign({tagName:s,disabled:r},o));return(0,n.jsx)(i,Object.assign({},o,d,{ref:t}))}));o.displayName="Button";const d=o},3360:(e,t,s)=>{s.d(t,{Z:()=>l});var r=s(1694),n=s.n(r),a=s(2791),c=s(5341),o=s(162),d=s(184);const i=a.forwardRef(((e,t)=>{let{as:s,bsPrefix:r,variant:a,size:i,active:l,className:x,...m}=e;const u=(0,o.vE)(r,"btn"),[h,{tagName:j}]=(0,c.FT)({tagName:s,...m}),p=j;return(0,d.jsx)(p,{...h,...m,ref:t,className:n()(x,u,l&&"active",a&&"".concat(u,"-").concat(a),i&&"".concat(u,"-").concat(i),m.href&&m.disabled&&"disabled")})}));i.displayName="Button",i.defaultProps={variant:"primary",active:!1,disabled:!1};const l=i},6144:(e,t,s)=>{s.d(t,{Z:()=>i});var r=s(1694),n=s.n(r),a=s(2791),c=s(162),o=s(184);const d=a.forwardRef(((e,t)=>{let{bsPrefix:s,size:r,vertical:a,className:d,as:i="div",...l}=e;const x=(0,c.vE)(s,"btn-group");let m=x;return a&&(m="".concat(x,"-vertical")),(0,o.jsx)(i,{...l,ref:t,className:n()(d,m,r&&"".concat(x,"-").concat(r))})}));d.displayName="ButtonGroup",d.defaultProps={vertical:!1,role:"group"};const i=d},2144:(e,t,s)=>{s.d(t,{Z:()=>C});var r=s(1694),n=s.n(r),a=s(2791),c=s(162),o=s(6543),d=s(7472),i=s(184);const l=a.forwardRef(((e,t)=>{let{bsPrefix:s,className:r,variant:a,as:o="img",...d}=e;const l=(0,c.vE)(s,"card-img");return(0,i.jsx)(o,{ref:t,className:n()(a?"".concat(l,"-").concat(a):l,r),...d})}));l.displayName="CardImg";const x=l,m=a.createContext(null);m.displayName="CardHeaderContext";const u=m,h=a.forwardRef(((e,t)=>{let{bsPrefix:s,className:r,as:o="div",...d}=e;const l=(0,c.vE)(s,"card-header"),x=(0,a.useMemo)((()=>({cardHeaderBsPrefix:l})),[l]);return(0,i.jsx)(u.Provider,{value:x,children:(0,i.jsx)(o,{ref:t,...d,className:n()(r,l)})})}));h.displayName="CardHeader";const j=h,p=(0,d.Z)("h5"),f=(0,d.Z)("h6"),b=(0,o.Z)("card-body"),g=(0,o.Z)("card-title",{Component:p}),v=(0,o.Z)("card-subtitle",{Component:f}),y=(0,o.Z)("card-link",{Component:"a"}),N=(0,o.Z)("card-text",{Component:"p"}),w=(0,o.Z)("card-footer"),_=(0,o.Z)("card-img-overlay"),Z=a.forwardRef(((e,t)=>{let{bsPrefix:s,className:r,bg:a,text:o,border:d,body:l,children:x,as:m="div",...u}=e;const h=(0,c.vE)(s,"card");return(0,i.jsx)(m,{ref:t,...u,className:n()(r,h,a&&"bg-".concat(a),o&&"text-".concat(o),d&&"border-".concat(d)),children:l?(0,i.jsx)(b,{children:x}):x})}));Z.displayName="Card",Z.defaultProps={body:!1};const C=Object.assign(Z,{Img:x,Title:g,Subtitle:v,Body:b,Link:y,Text:N,Header:j,Footer:w,ImgOverlay:_})},7472:(e,t,s)=>{s.d(t,{Z:()=>o});var r=s(2791),n=s(1694),a=s.n(n),c=s(184);const o=e=>r.forwardRef(((t,s)=>(0,c.jsx)("div",{...t,ref:s,className:a()(t.className,e)})))}}]);
//# sourceMappingURL=871.fdedb6b9.chunk.js.map