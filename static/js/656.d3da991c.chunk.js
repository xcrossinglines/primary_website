"use strict";(self.webpackChunkxcrossinglines=self.webpackChunkxcrossinglines||[]).push([[656],{656:(e,s,a)=>{a.r(s),a.d(s,{default:()=>E});var t=a(2791),n=a(7022),r=a(2144),o=a(7644),c=a(3360),i=a(9410),l=a(7689),d=a(6122),u=a(1087),x=a(5794),m=a(2797),h=a(3728),g=a(8820),w=a(5763),f=a(5872),p=a(4921),j=a(6342),b=a(9554),y=a(2641),v=a(4715),N=a(1243),Z=a(6746),k=a(2879),S=a(5977),_=a(3978),C=a(9775),F=a(5594),P=a(184);function E(){const e=(0,l.s0)(),s=t.useRef(),a=t.useRef(),[E,X]=t.useState(!1),[z,A]=t.useState(!1),[L,T]=t.useState(""),[V,q]=t.useState(!1),[I,O]=t.useState(""),[D,G]=t.useState(!1),[H,M]=t.useState(!1),[W,B]=t.useState(x.tx.none),[J,R]=t.useState(""),[K,U]=t.useState(""),$=(e,s,a)=>{B((s=>e)),R((e=>s)),U((e=>a));const t=e===x.tx.loading||e===x.tx.success;M((e=>t)),O((e=>t?"":"success"))},Q=(0,f.Nq)({onSuccess:async e=>await Y(e),onError:e=>$(x.tx.error,"Oops! error. ","".concat(e))}),Y=async e=>{$(x.tx.loading,"Fetching Info ...","");const s="https://www.googleapis.com/oauth2/v3/userinfo?access_token=".concat(e.access_token);await N.Z.get(s).then((async e=>{200===e.status&&($(x.tx.success,"Awesome.","success"),await(0,S.r)((async()=>await ee({f_name:e.data.given_name,s_name:e.data.family_name,m_number:L,email:e.data.email,password:e.data.sub,customer:!0})),2e3))})).catch((e=>{$(x.tx.error,"Oops! error. ","".concat(e))}))},ee=async e=>{$(x.tx.loading,"Signing in ...","");await b.Z.post("accounts/api/account/signin/google/",e).then((async e=>{if(200===e.status){$(x.tx.success,"Awesome.","success");const s={access:e.data.access,refresh:e.data.refresh[0]};se(s),await(0,S.r)((()=>{const[e,s]=(0,v.ML)();e?X((e=>!0)):window.location.href=x.dX.home}),2e3)}})).catch((e=>{(0,k.X)(e,$)}))},se=e=>{localStorage.setItem("xcrossinglines_tokens",JSON.stringify(e))},ae=t.useCallback((async e=>{$(x.tx.loading,"Signing in ...","");await b.Z.post("accounts/api/account/signin/",e).then((async e=>{200===e.status&&($(x.tx.success,"Awesome.","Success"),se({access:e.data.access,refresh:e.data.refresh}),await(0,S.r)((()=>{const[e,s]=(0,v.ML)();e?X((e=>!0)):window.location.href=x.dX.home}),2e3))})).catch((e=>{(0,k.X)(e,$)}))}),[]);return t.useEffect((()=>{window.scrollTo(0,0)}),[W]),t.useEffect((()=>{window.scrollTo(0,0)}),[]),(0,P.jsxs)(_.E.section,{className:"pb-3",variants:C.v,animate:"visible",initial:"hidden",exit:"exit",transition:{duration:F.V$,delay:F.p},children:[(0,P.jsxs)(n.Z,{className:"p-0 d-flex flex-column justify-content-center align-items-center",children:[(0,P.jsx)(r.Z,{className:"dropdown__shadow card__section border-0 rounded-0",children:(0,P.jsxs)(o.Z,{noValidate:!0,validated:D,onSubmit:async e=>{const t=e.currentTarget;if(!1===t.checkValidity())return(e=>{const s=e.querySelectorAll(":invalid");for(let t of s)if(a.current.id===t.id)return void O("danger");O("success")})(t),e.preventDefault(),e.stopPropagation(),void G(!0);O((e=>"success")),e.preventDefault(),e.stopPropagation(),G(!0),await ae({email:"".concat(s.current.value).toLowerCase(),password:a.current.value})},children:[(0,P.jsx)(r.Z.Header,{as:"h3",className:" pb-0 border-0 rounded-0 text-center bg-transparent",style:{fontWeight:"900"},children:"Sign In"}),(0,P.jsxs)(r.Z.Body,{children:[(0,m.w)(W,J,K),(0,P.jsx)("div",{className:"mb-3 mt-".concat(W===x.tx.none?"0":"3"),children:(0,P.jsxs)(c.Z,{variant:"light",className:"fw-bold w-100 rounded-0 d-flex flex-row justify-content-center align-items-center gap-2",disabled:H,onClick:()=>A((e=>!0)),children:["Continue with google",(0,P.jsx)(h.JM8,{size:20})]})}),(0,P.jsxs)("div",{className:"d-flex flex-row justify-content-center align-items-center gap-2 my-3",children:[(0,P.jsx)(Z.i,{}),(0,P.jsx)("span",{className:"text-muted px-2",style:{fontWeight:900},children:"Or"}),(0,P.jsx)(Z.i,{})]}),(0,P.jsx)(o.Z.Group,{className:"my-3",children:(0,P.jsxs)(o.Z.FloatingLabel,{label:"Email",className:"fw-bold",style:{color:"grey"},children:[(0,P.jsx)(o.Z.Control,{id:"EmailFormField",className:"rounded-0 fw-bold",placeholder:"xlines@example.co.za",disabled:H,required:!0,ref:s,type:"email"}),(0,P.jsx)(o.Z.Control.Feedback,{type:"invalid",children:"Please enter correct email address to continue"}),(0,P.jsx)(o.Z.Control.Feedback,{children:"Awesome"})]})}),(0,P.jsx)(o.Z.Group,{children:(0,P.jsxs)(i.Z,{className:"form-outline",hasValidation:!0,children:[(0,P.jsx)(o.Z.FloatingLabel,{label:"Password",className:"fw-bold ",style:{color:"grey"},children:(0,P.jsx)(o.Z.Control,{id:"PasswordFormControl",className:"rounded-0 fw-bold border-end-0 ",placeholder:"xlines@example.co.za",disabled:H,ref:a,required:!0,type:V?"text":"password",onChange:e=>{const s=e.currentTarget.checkValidity();D&&O((e=>s?"success":"danger"))}})}),(0,P.jsx)(i.Z.Text,{className:"rounded-0 bg-transparent border-start-0 border-".concat(I),onClick:()=>q((e=>!e)),children:(0,P.jsx)("div",{children:V?(0,P.jsx)(g.Zju,{size:22,color:"var(--primary-color)"}):(0,P.jsx)(g.I0d,{size:22,color:"var(--primary-color)"})})}),(0,P.jsx)(o.Z.Control.Feedback,{type:"invalid",children:"Please enter correct email address to continue"})]})}),(0,P.jsx)("div",{className:"mt-3 d-flex justify-content-end align-items-center",children:H?(0,P.jsx)("span",{className:"sign__in__links",children:"Forgot password?"}):(0,P.jsx)(u.rU,{className:"sign__in__links",to:x.dX.reset_account,reloadDocument:!1,children:"Forgot password ?"})})]}),(0,P.jsxs)(r.Z.Footer,{className:"bg-white pt-0 px-0 mx-3 border-0",children:[(0,P.jsx)(Z.i,{}),(0,P.jsx)("div",{className:"py-3",style:{fontWeight:"".concat(.875,"rem")},children:(0,P.jsxs)("span",{children:["By signing in you accept our"," ",(0,P.jsx)("a",{className:"text-dark fw-bold",href:p,target:"_blank",rel:"noreferrer",children:"terms"})," ","and"," ",(0,P.jsx)("a",{className:"text-dark fw-bold",href:p,target:"_blank",rel:"noreferrer",children:"conditions"})]})}),(0,P.jsx)(c.Z,{className:"w-100 rounded-0 text-white fw-bold",variant:"primary",type:"submit",disabled:H,children:"Submit"}),(0,P.jsxs)(c.Z,{className:"w-100 rounded-0 border-0 bg-transparent fw-bold mt-2",variant:"outline-primary",disabled:H,onClick:()=>e(x.dX.signup),children:[(0,P.jsx)("span",{className:"text-muted fw-normal",children:"or "}),"Create an account"]})]})]})}),(0,P.jsx)(j.XK.Provider,{value:{show:z,setShow:A,setShowGoogle:Q,setCustomerPhonenumber:e=>T((()=>e))},children:(0,P.jsx)(w.b,{})}),(0,P.jsx)(j.kH.Provider,{value:{show:E,setShow:X},children:(0,P.jsx)(y.E,{})})]}),(0,P.jsx)(d.P,{height:"".concat(window.innerHeight/2,"px")})]})}}}]);
//# sourceMappingURL=656.d3da991c.chunk.js.map