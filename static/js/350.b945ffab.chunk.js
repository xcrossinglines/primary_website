"use strict";(self.webpackChunkxcrossinglines=self.webpackChunkxcrossinglines||[]).push([[350],{8487:(e,t,s)=>{s.r(t),s.d(t,{default:()=>E});var n=s(2791),r=s(7644),a=s(7022),o=s(2144),c=s(7689),i=s(6122),l=(s(6746),s(3853)),d=s(6342),x=s(9554),h=s(9625),u=s(5794),m=s(2797),j=s(7612),p=s(9920),b=s(3360),f=s(2879),g=s(5977),w=s(6612),y=s(184);function v(){const e=n.useContext(d.eJ),t=(0,c.s0)(),s=n.useRef(),[a,o]=n.useState(0),[i,l]=n.useState(!1),[v,N]=n.useState(u.tx.none),[Z,_]=n.useState(""),[k,C]=n.useState(""),S=(e,t,s)=>{N((t=>e)),_((e=>t)),C((e=>s));const n=e===u.tx.loading||e===u.tx.success;l((e=>n))},z=e=>u.Ht.findIndex((t=>t.size===e.size)),D=(e,t)=>u.Ht[e].size===t.size;return n.useEffect((()=>{o((t=>u.Ht.findIndex((t=>t.size===e.job.vehicle_size))))}),[e]),(0,y.jsxs)(j.Z,{centered:!0,show:e.show,contentClassName:"rounded-0",onHide:i?null:()=>{S(u.tx.none,"",""),e.setShow((e=>!1))},children:[(0,y.jsx)(j.Z.Header,{ref:s,closeButton:!0,className:"rounded-0 text-dark border-0",children:(0,y.jsx)(j.Z.Title,{style:{fontWeight:"900"},children:"Edit vehicle size"})}),(0,y.jsxs)(j.Z.Body,{children:[(0,m.w)(v,Z,k),(0,y.jsx)(p.Z,{activeIndex:a,controls:!1,indicators:!1,children:u.Ht.map(((e,t)=>(0,y.jsx)(p.Z.Item,{className:"px-4 pt-2",children:(0,y.jsx)("div",{className:"w-100 d-flex justify-content-center align-items-center",children:(0,y.jsx)("img",{className:"d-block w-75",src:e.img,alt:"".concat(e.size)})})},t)))}),(0,y.jsx)("div",{className:"py-3 d-flex flex-column justify-content-start align-items-start gap-2",children:u.Ht.map(((e,t)=>(0,y.jsx)(w.w,{className:"p-1",children:(0,y.jsx)(r.Z.Group,{id:"Group-".concat(t),className:"border border-0 border-end border-3 pe-1",children:(0,y.jsxs)(r.Z.Check,{type:"checkbox",disabled:i,value:e.size,checked:D(a,e),onClick:t=>o((t=>z(e))),children:[(0,y.jsxs)(r.Z.Check.Label,{style:{fontSize:"".concat(.875,"rem"),fontWeight:D(a,e)?600:""},onClick:()=>o((t=>z(e))),children:[(0,y.jsxs)("span",{className:"text-".concat(D(a,e)?"primary":"dark"),style:{fontWeight:"900"},children:[e.size," Ton"]})," ",e.description]}),(0,y.jsx)(r.Z.Check.Input,{type:"checkbox",value:e.size,disabled:i,onChange:e=>{},onClick:t=>o((t=>z(e))),checked:D(a,e)})]})})},t)))})]}),(0,y.jsx)(j.Z.Footer,{className:"rounded-0 border-0 m-0",children:(0,y.jsx)(b.Z,{variant:"outline-primary",className:"border-0 rounded-0 fw-bold",disabled:i,onClick:async()=>await(async()=>{const[n,r]=(0,h.f)();if(n){var o;null===(o=s.current)||void 0===o||o.scrollIntoView({block:"nearest"}),S(u.tx.loading,"Updating ...","");const t="jobs/api/job/update/".concat(e.job.id,"/");return void await x.Z.patch(t,{vehicle_size:u.Ht[a].size.toFixed(1)}).then((async t=>{S(u.tx.success,"Awesome.","Vehicle size updated successfully");const s="/jobs/job/".concat(e.job.id,"/update");await(0,g.r)((()=>e.setShow((e=>!1))),2e3),await(0,g.r)((()=>window.location.href=s),2e3)})).catch((e=>{(0,f.X)(e,S)}))}S(u.tx.info,"Dear valued customer. ","To view this section you must be signed in. we'll navigate you to the sign-in page."),await(0,g.r)((()=>{e.setShow((e=>!1)),t(u.dX.signin)}),6e3)})(),children:"Select & update"})})]})}var N=s(9410),Z=s(4017),_=s(8617),k=s(6856);function C(){const e=n.useRef(),t=n.useContext(d.eJ),s=(0,c.s0)(),[a,o]=n.useState([]),[i,l]=n.useState(!1),[p,w]=n.useState(u.tx.none),[v,C]=n.useState(""),[S,z]=n.useState(""),{placesService:D,placePredictions:H,getPlacePredictions:P,isPlacePredictionsLoading:T}=(0,Z.Z)({apiKey:u.JO,debounce:100,options:{componentRestrictions:{country:"za"}}}),I=(e,t,s)=>{w((t=>e)),C((e=>t)),z((e=>s));const n=e===u.tx.loading||e===u.tx.success;l((e=>n))},F=e=>{let{routes:t}=e;if(t.length>0)return(0,y.jsx)("div",{className:"mt-3",children:(0,y.jsxs)("table",{className:"table table-bordered table-striped table-dark m-0",children:[t.length>0?(0,y.jsx)("thead",{children:(0,y.jsx)("tr",{children:(0,y.jsx)("th",{children:"Routes"})})}):null,(0,y.jsx)("tbody",{children:t.map(((e,s)=>{return(0,y.jsx)("tr",{children:(0,y.jsx)("td",{children:(0,y.jsxs)("div",{className:"d-flex flex-row justify-content-between align-items-center",children:[(0,y.jsxs)("div",{className:"d-flex flex-column",children:[(0,y.jsxs)("span",{className:"form-text fw-bold text-warning",children:[s+1," - ",(n=t,r=s,r<=0?"Pickup":r>0&&r<n.length-1?"Pickup|Dropoff":"Dropoff")]}),(0,y.jsx)("span",{style:{fontSize:"".concat(.875,"rem")},children:e.route_name})]}),(0,y.jsx)("div",{className:"ms-2",children:(0,y.jsx)("button",{type:"button",className:"btn-close btn-close-white","aria-label":"Close",onClick:i?null:()=>{const t=a.filter((function(t){return t!==e}));o((e=>[...t]))}})})]})})},"route-".concat(s));var n,r}))})]})})},A=t=>{if(t.length>0)return t.map(((t,s)=>(0,y.jsxs)("li",{className:"btn btn-light border-0 w-100 rounded-0 text-dark d-flex flex-row justify-content-start align-items-start text-start gap-2",onClick:()=>{return s=t,void(null===D||void 0===D||D.getDetails({placeId:s.place_id},(t=>{const n={route_name:"".concat(s.structured_formatting.main_text," ").concat(s.structured_formatting.secondary_text),lat:t.geometry.location.lat(),lng:t.geometry.location.lng()};o((e=>[...a,n])),P({input:""}),e.current.value=""})));var s},children:[(0,y.jsx)("div",{className:"p-0 m-0",children:(0,y.jsx)(_.XAC,{color:"red"})}),(0,y.jsxs)("span",{style:{fontSize:"".concat(.875,"rem")},children:[(0,y.jsx)("strong",{children:t.structured_formatting.main_text})," ",t.structured_formatting.secondary_text]})]},s)))},E=async e=>{const[n,r]=(0,h.f)();if(n){I(u.tx.loading,"Updating ...","");const s={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r.access)}},n="jobs/api/job/update/".concat(t.job.id,"/");return void await x.Z.patch(n,e,s).then((async e=>{I(u.tx.success,"Awesome.","Routes successfully updated");const s="/jobs/job/".concat(t.job.id,"/update");await(0,g.r)((()=>t.setShow((e=>!1))),2e3),await(0,g.r)((()=>window.location.href=s),2e3)})).catch((e=>{(0,f.X)(e,I)}))}I(u.tx.info,"Dear valued customer. ","To view this section you must be signed in. we'll navigate you to the sign-in page."),await(0,g.r)((()=>{t.setShow((e=>!1)),s(u.dX.signin)}),6e3)};return n.useEffect((()=>{o((e=>[...t.job.routes]))}),[t]),(0,y.jsxs)(j.Z,{contentClassName:"rounded-0",centered:!0,show:t.show,onHide:i?null:()=>{t.setShow((e=>!1)),I(u.tx.none,"","")},children:[(0,y.jsx)(j.Z.Header,{closeButton:!0,className:"rounded-0 text-dark border-0",children:(0,y.jsx)(j.Z.Title,{style:{fontWeight:"900"},children:"Edit routes"})}),(0,y.jsxs)(j.Z.Body,{children:[(0,m.w)(p,v,S),(0,y.jsx)(F,{routes:a}),(0,y.jsxs)(r.Z.Group,{className:"position-relative mt-3",children:[(0,y.jsxs)(N.Z,{children:[(0,y.jsx)(r.Z.Control,{className:"fw-bold rounded-0 border-end-0",placeholder:"Search",ref:e,disabled:i,onChange:e=>P({input:e.target.value})}),(0,y.jsx)(N.Z.Text,{className:"bg-white rounded-0",children:(0,y.jsx)(k.yw4,{color:"red"})})]}),(0,y.jsx)("ul",{className:"dropdown__shadow mt-2 p-0 shadow-sm w-100 position-absolute bg-white d-flex flex-column justify-content-center align-items-center gap-1",style:{listStyle:"none",zIndex:"999"},children:(q=T,q?(0,y.jsx)("div",{className:"w-100 p-2 d-flex flex-row justify-content-center align-items-center",children:(0,y.jsx)("div",{className:"spinner-border text-secondary",role:"status",children:(0,y.jsx)("span",{className:"visually-hidden",children:"Loading..."})})}):H.length>0?A(H):void 0)})]})]}),(0,y.jsx)(j.Z.Footer,{className:"rounded-0 border-0",children:(0,y.jsx)(b.Z,{disabled:i,variant:"outline-primary",className:"border-0 rounded-0 fw-bold",onClick:async()=>await(async e=>{I(u.tx.loading,"Loading ...",""),await x.Z.post("jobs/api/compute-distance/",{routes:e}).then((async t=>{if(200===t.status){I(u.tx.none,"","");const s={routes:e,distance:t.data.distance};await E(s)}})).catch((e=>{(0,f.X)(e,I)}))})(a),children:"Select & update"})})]});var q}var S=s(9561),z=s(9513),D=s.n(z);s(8077);function H(){const e=n.useContext(d.eJ),t=(0,c.s0)(),s=n.useRef(),a=n.useRef(),[o,i]=n.useState(new Date),[l,p]=n.useState(1),[w,v]=n.useState(0),[N,Z]=n.useState(0),[_,k]=n.useState(!1),[C,z]=n.useState("CASH"),[H,P]=n.useState(!1),[T,I]=n.useState(u.tx.none),[F,A]=n.useState(""),[E,q]=n.useState(""),[R,J]=n.useState("border-0 text-dark"),L=Array(3).fill(0),O=Array(11).fill(0),M=(e,t,s)=>{I((t=>e)),A((e=>t)),q((e=>s));const n=e===u.tx.loading||e===u.tx.success;P((()=>n))},U=(e,t,s)=>e>1?"".concat(e," ").concat(s):"".concat(e," ").concat(t),B=async s=>{const[n,r]=(0,h.f)();if(n){M(u.tx.loading,"Updating ...","");const t="jobs/api/job/update/".concat(e.job.id,"/");return void await x.Z.patch(t,s).then((async t=>{if(200===t.status){const t="Update success",s="Awesome.";M(u.tx.success,s,t),await(0,g.r)((()=>e.setShow((e=>!1))),2e3),await(0,g.r)((()=>{const t="/jobs/job/".concat(e.job.id,"/update");window.location.href=t}))}})).catch((e=>(0,f.X)(e,M)))}M(u.tx.info,"Dear valued customer. ","To view this section you must be signed in. we'll navigate you to the sign-in page."),await(0,g.r)((()=>{e.setShow((e=>!1)),t(u.dX.signin)}),6e3)};return(0,y.jsxs)(j.Z,{centered:!0,show:e.show,contentClassName:"rounded-0",onEntered:async t=>{s.current.value=e.job.driver_note,v((t=>e.job.floors)),p((t=>e.job.helpers)),((e,t)=>{if(e<=u.Ht[1].size)return k((e=>!0)),void Z((e=>0));k((e=>!1)),Z((e=>t))})(e.job.vehicle_size,e.job.shuttle),z(e.job.payment_option),i(new Date("".concat(e.job.job_date," ").concat(e.job.job_time)))},onHide:()=>{e.setShow((e=>!1)),M(u.tx.none,"",""),J((e=>"border-0 text-dark"))},children:[(0,y.jsx)(j.Z.Header,{ref:a,closeButton:!0,className:"rounded-0 text-dark border-0",children:(0,y.jsx)(j.Z.Title,{style:{fontWeight:"900"},children:"Edit additional information"})}),(0,y.jsxs)(j.Z.Body,{children:[(0,m.w)(T,F,E),(0,y.jsxs)(r.Z.Group,{className:"position-relative mb-3 mt-".concat(T===u.tx.none?"0":"3"),children:[(0,y.jsx)(D(),{disabled:H,startDate:o,minDate:Date.now(),className:"form-control w-auto py-1 rounded-0 border-0 bg-white fw-bold text-start border-primary date__time",dateFormat:"yyyy-MMM-dd HH:mm",timeFormat:"HH:mm",selected:o,calendarClassName:"rounded-0 w-100 d-flex flex-row",showTimeSelect:!0,showPopperArrow:!1,onFocus:e=>e.target.readOnly=!0,onChange:e=>{i((t=>e))}}),(0,y.jsx)("div",{className:"text-start ps-3",children:(0,y.jsx)(r.Z.Text,{children:"Job date and time"})})]}),(0,y.jsxs)(r.Z.Group,{className:"mb-3",children:[(0,y.jsxs)(S.Z,{className:"border-0",children:[(0,y.jsxs)(S.Z.Toggle,{variant:"outline-light",className:"rounded-0 py-1 border-0 text-dark fw-bold d-flex justify-content-between align-items-center",disabled:H,children:["Additional helpers : ",l]}),(0,y.jsx)(S.Z.Menu,{className:"rounded-0",children:L.map(((e,t)=>(0,y.jsx)(S.Z.Item,{className:"fw-bold",id:L.length-t,onClick:e=>p((t=>Number(e.currentTarget.id))),children:U(L.length-t,"Helper","Helpers")},t+1)))})]}),(0,y.jsx)("div",{className:"text-start ps-3",children:(0,y.jsxs)(r.Z.Text,{children:["Driver + ",U(l,"helper","helpers")]})})]}),(0,y.jsxs)(r.Z.Group,{className:"mb-3",children:[(0,y.jsxs)(S.Z,{className:"border-0",children:[(0,y.jsxs)(S.Z.Toggle,{variant:"outline-light",className:"rounded-0 py-1 border-0 text-dark fw-bold d-flex justify-content-between align-items-center",disabled:H,children:["Floors to carry : ",w]}),(0,y.jsx)(S.Z.Menu,{className:"rounded-0",children:O.map(((e,t)=>(0,y.jsx)(S.Z.Item,{className:"fw-bold",id:O.length-1-t,onClick:e=>v((t=>Number(e.currentTarget.id))),children:U(O.length-1-t,"Floor","Floors")},t)))})]}),(0,y.jsx)("div",{className:"text-start ps-3",children:(0,y.jsx)(r.Z.Text,{children:"No. of floors to carry from and to pickup routes"})})]}),(0,y.jsxs)(r.Z.Group,{className:"mb-3",children:[(0,y.jsxs)(S.Z,{className:"border-0",children:[(0,y.jsxs)(S.Z.Toggle,{disabled:H,variant:"outline-light",className:"py-1 rounded-0 border-0 text-dark fw-bold d-flex justify-content-between align-items-center",children:["Payment method : ","".concat(C).toLowerCase()]}),(0,y.jsx)(S.Z.Menu,{className:"rounded-0",children:["Cash","Eft"].map(((e,t)=>(0,y.jsx)(S.Z.Item,{id:e,className:"fw-bold",onClick:t=>z((t=>"".concat(e).toUpperCase())),children:e},t)))})]}),(0,y.jsx)("div",{className:"text-start ps-3",children:(0,y.jsxs)(r.Z.Text,{children:[(0,y.jsx)("span",{className:"text-danger fw-bold",children:"Please note! "})," pay"," ","".concat(C).toLowerCase()," at delivery point"]})})]}),(0,y.jsxs)(r.Z.Group,{className:"px-3",children:[(0,y.jsx)(r.Z.Label,{children:"Driver note"}),(0,y.jsx)(r.Z.Control,{required:!1,disabled:H,ref:s,className:"w-100 rounded-0 fw-bold"}),(0,y.jsx)(r.Z.Text,{children:"Leave a note for the driver, this can be any information you'd like to convey or any special requests."})]})]}),(0,y.jsx)(j.Z.Footer,{className:"rounded-0 border-0",children:(0,y.jsx)(b.Z,{disabled:H,variant:"outline-primary",className:"border-0 rounded-0 fw-bold",onClick:async()=>await(async e=>{var t;if(null===(t=a.current)||void 0===t||t.scrollIntoView({block:"nearest"}),e-Date.now()<54e5){const e="".concat(u.WD);return M(u.tx.error,"Oops! error. ",e),void J((e=>"border border-danger border-1 text-danger"))}M(u.tx.none,"",""),J((e=>"border-0 text-dark"));const n=o.getFullYear(),r=o.getMonth()+1,c=o.getDate(),i=o.getHours(),d=o.getMinutes(),x=o.getSeconds(),h="".concat(n,"-").concat(r,"-").concat(c),m="".concat(i,":").concat(d,":").concat(x);await B({job_date:h,job_time:m,helpers:l,floors:w,shuttle:N,payment_option:C,driver_note:s.current.value})})(o),children:"Select & update"})})]})}var P=s(3978),T=s(9775),I=s(5594),F=s(4674),A=s(8808);function E(){const{id:e}=(0,c.UO)(),t=(0,c.s0)(),[s,r]=(Intl.NumberFormat("en-ZA",{style:"currency",currency:"zar",minimumSignificantDigits:1}),n.useState(!1)),[j,p]=n.useState(!1),[b,N]=n.useState(!1),[Z,_]=n.useState({}),[k,S]=n.useState(!1),[z,D]=n.useState(u.tx.none),[E,q]=n.useState(""),[R,J]=n.useState(""),L=(e,t,s)=>{D((t=>e)),q((e=>t)),J((e=>s))},O=e=>{if(e)return e.job_completed||e.job_canceled?[!0,e]:[!1,e]},M=e=>{if(e)return Z.job_completed||Z.job_canceled?"muted":"white"},U=e=>{if(e)return Z.job_completed?"secondary":Z.job_canceled?"danger":"success"},B=(e,t,s)=>{const[n,r]=s;return(0,y.jsx)("div",{children:(0,y.jsx)(w.w,{onClick:n?null:()=>t(!0),className:"w-100",children:(0,y.jsxs)("div",{className:"bg-".concat(U(r)," ").concat("px-3 py-2 d-flex flex-row justify-content-between align-items-center bg-opacity-75"),children:[(0,y.jsx)("span",{className:"text-".concat(M(r)),style:{fontWeight:900,fontSize:"".concat(1.125,"rem")},children:e}),(0,y.jsx)(l.vPQ,{className:"text-".concat(M(r))})]})})})},X=e=>{let{job:t}=e;return(0,y.jsxs)("div",{className:"px-3 my-2",children:[(0,y.jsxs)("table",{className:"table table-".concat(U(t)," table-striped table-bordered m-0"),children:[(0,y.jsx)("thead",{children:(0,y.jsx)("tr",{children:(0,y.jsx)("th",{scope:"col",children:"Routes"})})}),(0,y.jsx)("tbody",{children:t.routes.map(((e,t)=>(0,y.jsx)("tr",{children:(0,y.jsx)("td",{children:(0,y.jsxs)("div",{className:"d-flex flex-column",children:[(0,y.jsxs)("span",{className:"form-text fw-bold",children:[t+1," - ",u.tP[e.description]]}),(0,y.jsx)("span",{children:e.route_name})]})})})))})]}),(0,y.jsxs)("table",{className:"table table-striped table-bordered table-".concat(U(t)," m-0 mt-2"),children:[(0,y.jsx)("thead",{children:(0,y.jsxs)("tr",{children:[(0,y.jsx)("th",{scope:"col",children:"Description"}),(0,y.jsx)("th",{scope:"col",children:"Qty"})]})}),(0,y.jsx)("tbody",{children:(0,y.jsxs)("tr",{children:[(0,y.jsx)("td",{children:"Distance"}),(0,y.jsx)("td",{children:"".concat(t.distance," km")})]})})]})]})},W=e=>{let{job:t}=e;return console.log(t),(0,y.jsx)(n.Fragment,{children:(0,y.jsx)("div",{className:"px-3 pt-2 pb-3",children:(0,y.jsxs)("table",{className:"table table-striped table-bordered table-".concat(U(t)," m-0"),children:[(0,y.jsx)("thead",{children:(0,y.jsxs)("tr",{children:[(0,y.jsx)("th",{scope:"col",children:"Description"}),(0,y.jsx)("th",{scope:"col",children:"Qty"})]})}),(0,y.jsxs)("tbody",{children:[(0,y.jsxs)("tr",{children:[(0,y.jsx)("td",{children:"Job date"}),(0,y.jsx)("td",{children:"".concat(F.Ib.format(new Date(t.job_date)))})]}),(0,y.jsxs)("tr",{children:[(0,y.jsx)("td",{children:"Job time"}),(0,y.jsx)("td",{children:"".concat(F.Lm.format(new Date("".concat(t.job_date," ").concat(t.job_time))))})]}),(0,y.jsxs)("tr",{children:[(0,y.jsx)("td",{children:"Payment option"}),(0,y.jsx)("td",{children:"".concat(t.payment_option)})]}),(0,y.jsxs)("tr",{children:[(0,y.jsx)("td",{children:"Helpers"}),(0,y.jsx)("td",{children:"".concat(t.helpers)})]}),(0,y.jsxs)("tr",{children:[(0,y.jsx)("td",{children:"Floors"}),(0,y.jsx)("td",{children:"".concat(t.floors)})]})]})]})})})},G=n.useCallback((async()=>{const[s,n]=(0,h.f)();if(s){S((e=>!1)),L(u.tx.loading,"Fetching Job...","");const t="jobs/api/get/".concat(e,"/");return void await x.Z.get(t).then((e=>{200===e.status&&(_((t=>e.data)),S((e=>!0)),L(u.tx.none,"",""))})).catch((e=>{S((e=>!1)),(0,f.X)(e,L)}))}L(u.tx.info,"Dear valued customer. ","To view this section you must be signed in. we'll navigate you to the sign-in page."),await(0,g.r)((()=>t(u.dX.signin)),6e3)}),[]);return n.useEffect((()=>{window.scrollTo(0,0),G()}),[G]),(0,y.jsxs)(P.E.section,{className:"pb-3 px-3",variants:T.v,animate:"visible",initial:"hidden",exit:"exit",transition:{duration:I.V$,delay:I.p},children:[(0,y.jsxs)(a.Z,{className:"p-0 d-flex flex-column justify-content-center align-items-center",children:[(0,y.jsxs)(o.Z,{className:"dropdown__shadow card__section border-0 rounded-0",children:[(0,y.jsx)(o.Z.Header,{className:"bg-".concat(U(k)," text-white rounded-0 border-0 mb-0"),children:(0,y.jsxs)("div",{className:"d-flex flex-row justify-content-between align-items-center",children:[(0,y.jsxs)("span",{style:{fontWeight:"900"},children:["INVOICE ",e]}),(0,y.jsx)("span",{className:"text-white fw-bold",children:(e=>{if(e)return Z.job_completed?"COMPLETED":Z.job_canceled?"CANCELLED":"ACTIVE"})(k)})]})}),(0,y.jsxs)(o.Z.Body,{className:"p-0",children:[(e=>{if(e.job_completed||e.job_canceled)return(0,y.jsx)("div",{className:"bg-warning bg-opacity-25 p-3 text-center",children:(0,y.jsxs)("span",{className:"mb-2 text-dark",children:[(0,y.jsx)("span",{className:"text-danger fw-bold",children:"Please note!"})," a completed or cancelled job cannot be edited."]})})})(Z),(0,m.w)(z,E,R),(V=k,V?(0,y.jsxs)(n.Fragment,{children:[B("Job vehicle type",N,O(Z)),(0,y.jsx)("div",{className:"my-2 px-3",children:(0,y.jsxs)("table",{className:"table table-striped table-bordered table-".concat(U(Z)," m-0"),children:[(0,y.jsx)("thead",{children:(0,y.jsxs)("tr",{children:[(0,y.jsx)("th",{scope:"col",children:"Description"}),(0,y.jsx)("th",{scope:"col",children:"Qty"})]})}),(0,y.jsx)("tbody",{children:(0,y.jsxs)("tr",{children:[(0,y.jsx)("td",{children:"Vehicle size"}),(0,y.jsx)("td",{children:"".concat(Z.vehicle_size," Ton")})]})})]})}),B("Job routes",p,O(Z)),(0,y.jsx)(X,{job:Z}),B("Job add-info ",r,O(Z)),(0,y.jsx)(W,{job:Z}),(0,y.jsx)(A.U,{job:Z})]}):(0,y.jsx)(y.Fragment,{}))]})]}),((e,t)=>{if(e)return(0,y.jsxs)(n.Fragment,{children:[(0,y.jsx)(d.eJ.Provider,{value:{show:s,setShow:r,job:t},children:(0,y.jsx)(H,{})}),(0,y.jsx)(d.eJ.Provider,{value:{show:b,setShow:N,job:t},children:(0,y.jsx)(v,{})}),(0,y.jsx)(d.eJ.Provider,{value:{show:j,setShow:p,job:t},children:(0,y.jsx)(C,{})})]})})(k,Z)]}),(0,y.jsx)(i.P,{height:"100px"})]});var V}},6746:(e,t,s)=>{s.d(t,{i:()=>r});s(2791);var n=s(184);function r(){return(0,n.jsx)("hr",{className:"p-0 my-2 border-0",color:"#c9c9c9",style:{height:"2px",width:"100%"}})}},8808:(e,t,s)=>{s.d(t,{U:()=>d});s(2791);var n=s(9813),r=s(2144),a=s(8396),o=s(9126),c=s(5794),i=s(6612),l=s(184);function d(e){let{job:t,padding:s="p-3"}=e;const d=Intl.NumberFormat("en-ZA",{style:"currency",currency:"zar",minimumSignificantDigits:1}),x=e=>(0,l.jsx)(n.Z,{id:"popover-basic",className:"rounded-0 border-secondary",arrowProps:{style:{backgroundColor:"red"}},children:(0,l.jsx)(n.Z.Body,{className:"text-secondary fw-bold rounded-0",children:e})});return(0,l.jsx)(r.Z,{className:"dropdown__shadow rounded-0 border-0",children:(0,l.jsx)(r.Z.Body,{className:"".concat(s),children:(0,l.jsxs)("table",{className:"table table-bordered table-striped table-dark m-0",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{scope:"col",children:"Description"}),(0,l.jsx)("th",{scope:"col",children:"Price(ZAR)"})]})}),(0,l.jsxs)("tbody",{children:[(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:(0,l.jsxs)("div",{className:"d-flex flex-row",children:[(0,l.jsx)("span",{children:"Base fee"}),(0,l.jsx)(i.w,{className:"px-1",children:(0,l.jsx)(a.Z,{trigger:"click",placement:"top",rootClose:!0,overlay:x("".concat(c.rF)),children:(0,l.jsx)("div",{children:(0,l.jsx)(o.Hfo,{role:"button",className:"text-primary"})})})})]})}),(0,l.jsx)("td",{children:"".concat(d.format(t.base_fee))})]}),(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:(0,l.jsxs)("div",{className:"d-flex flex-row",children:[(0,l.jsx)("span",{children:"Off peak"}),(0,l.jsx)(i.w,{className:"px-1",children:(0,l.jsx)(a.Z,{trigger:"click",placement:"top",rootClose:!0,overlay:x("".concat(c.Pm)),children:(0,l.jsx)("div",{children:(0,l.jsx)(o.Hfo,{role:"button",className:"text-primary"})})})})]})}),(0,l.jsx)("td",{className:"text-danger fw-bolder",children:"".concat(t.mid_discount>0?"-":""," ").concat(d.format(t.mid_discount))})]}),(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:(0,l.jsxs)("div",{className:"d-flex flex-row",children:[(0,l.jsx)("span",{children:"Return customer"}),(0,l.jsx)(i.w,{className:"px-1",children:(0,l.jsx)(a.Z,{trigger:"click",placement:"top",rootClose:!0,overlay:x("".concat(c.te)),children:(0,l.jsx)("div",{children:(0,l.jsx)(o.Hfo,{role:"button",className:"text-primary"})})})})]})}),(0,l.jsx)("td",{className:"text-danger fw-bolder",children:"".concat(t.return_customer_discount>0?"-":""," ").concat(d.format(t.return_customer_discount))})]}),t.give_extra_discount?(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:(0,l.jsxs)("div",{className:"d-flex flex-row",children:[(0,l.jsx)("span",{children:"Extra discount"}),(0,l.jsx)(i.w,{className:"px-1",children:(0,l.jsx)(a.Z,{trigger:"click",placement:"top",rootClose:!0,overlay:x("".concat(c.j_)),children:(0,l.jsx)("div",{children:(0,l.jsx)(o.Hfo,{role:"button",className:"text-primary"})})})})]})}),(0,l.jsx)("td",{className:"text-danger",children:"".concat(t.give_extra_discount?"-":""," ").concat(d.format(t.extra_discount))})]}):null,t.set_price_adjustment?(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:(0,l.jsxs)("div",{className:"d-flex flex-column",children:[(0,l.jsxs)("div",{className:"d-flex flex-row",children:[(0,l.jsx)("span",{children:"Price adjustment"}),(0,l.jsx)(i.w,{className:"px-1",children:(0,l.jsx)(a.Z,{trigger:"click",placement:"top",rootClose:!0,overlay:x("".concat(c.fk)),children:(0,l.jsx)("div",{children:(0,l.jsx)(o.Hfo,{role:"button",className:"text-primary"})})})})]}),(0,l.jsxs)("span",{className:"text-muted form-text fw-bold border border-2 px-1 bg-light",children:["Price adjustment justification:"," ",(0,l.jsx)("span",{className:"text-dark",children:t.price_adjustment_justification})]})]})}),(0,l.jsx)("td",{children:"".concat(d.format(t.price_adjustment))})]}):null]}),(0,l.jsx)("tfoot",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:(0,l.jsxs)("div",{className:"d-flex flex-row",children:[(0,l.jsx)("span",{style:{fontWeight:"900"},children:"Amount due"}),(0,l.jsx)(i.w,{className:"px-1",children:(0,l.jsx)(a.Z,{trigger:"click",placement:"top",rootClose:!0,overlay:x("".concat(c.Iu)),children:(0,l.jsx)("div",{children:(0,l.jsx)(o.Hfo,{role:"button",className:"text-primary"})})})})]})}),(0,l.jsx)("td",{children:(0,l.jsx)("span",{style:{fontWeight:"900",fontSize:"".concat(1.25,"rem")},children:d.format(t.amount_due).replace("ZA","")})})]})})]})})})}},6342:(e,t,s)=>{s.d(t,{IK:()=>r,Vz:()=>i,XK:()=>a,eJ:()=>c,j3:()=>o,kH:()=>l});var n=s(2791);const r=n.createContext(),a=n.createContext(),o=n.createContext(),c=n.createContext(),i=n.createContext(),l=n.createContext()},2879:(e,t,s)=>{s.d(t,{X:()=>a});const n={100:"Continue",101:"Switching protocols",102:"Processing",103:"Early hints",200:"Ok",201:"Created",202:"Accepted",203:"Non authoritative information",204:"No content",205:"Reset content",206:"Partial content",207:"Multi status",208:"Already reported",226:"Im used",300:"Multiple choices",301:"Moved permanently",302:"Found",303:"See other",304:"Not modified",305:"Use proxy",306:"Reserved",307:"Temporary redirect",308:"Permanent redirect",400:"Bad request",401:"Unauthorized",402:"Payment required",403:"Forbidden",404:"Not found",405:"Method_not_allowed",406:"Not acceptable",407:"Proxy authentication required",408:"Request timeout",409:"Conflict",410:"Gone",411:"Length required",412:"Precondition failed",413:"Request entity too large",414:"Request uri too long",415:"Unsupported media type",416:"Requested range not satisfiable",417:"Expectation failed",418:"Im a teapot",421:"Misdirected_request",422:"Unprocessable entity",423:"Locked",424:"Failed dependency",425:"Too early",426:"Upgrade required",428:"Precondition required",429:"Too many requests",431:"Request header fields too large",451:"Unavailable for legal reasons"};var r=s(5794);function a(e,t){if(e.response){let s;const a=e.response.status;if(a>=500)return s="Internal server error. Contact admin",void t(r.tx.error,"Oops!",s);e.response.data.detail?(s="".concat(n[a],", ").concat(e.response.data.detail),t(r.tx.error,"Oops!",s)):e.response.data.msg?(s="".concat(n[a],", ").concat(e.response.data.msg),t(r.tx.error,"Oops!",s)):e.response.data.email?(s="".concat(n[a],", ").concat(e.response.data.email),t(r.tx.error,"Oops!",s)):(s="".concat(n[a]),t(r.tx.error,"Oops!",s))}else e.request?t(r.tx.error,"Oops!",e.request):t(r.tx.error,"Oops!",e.message)}},4674:(e,t,s)=>{s.d(t,{Ib:()=>n,Lm:()=>r});const n=Intl.DateTimeFormat("en-ZA",{weekdays:"long",year:"numeric",month:"long",day:"numeric"}),r=Intl.DateTimeFormat("en-Za",{hour:"numeric",minute:"numeric",timeZone:"Africa/Harare",timeZoneName:"short"});Intl.NumberFormat("en-ZA",{style:"currency",currency:"zar",minimumSignificantDigits:1})},8077:()=>{}}]);
//# sourceMappingURL=350.b945ffab.chunk.js.map